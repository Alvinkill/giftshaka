<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Gift Shaka Global Concepts Garri Factory</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="logo.jpg" type="image/jpg">
    
    <style>
        /* CRITICAL: Hide the page by default so the bouncer can work */
        body.admin {
            display: none;
            background: linear-gradient(135deg, #f0f8f0 0%, #e8f5e8 100%);
            background-attachment: fixed;
        }

        .admin-dashboard { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
        .admin-header { background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; padding: 2rem; border-radius: 10px; text-align: center; margin-bottom: 2rem; }
        .admin-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
        .stat-card { background-color: white; padding: 1.5rem; border-radius: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
        .stat-card h3 { color: #27ae60; margin-bottom: 0.5rem; }
        .admin-actions { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; }
        .action-card { background-color: white; padding: 1.5rem; border-radius: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
        .action-card button { background-color: #27ae60; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 6px; cursor: pointer; }
        .logout-btn {
            color: inherit;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: inherit;
            border: none;
            cursor: pointer;
            text-decoration: underline;
            padding: 20px;
        }
        
        .logout-btn:hover {
            color: var(--accent-green);
        }
    </style>

    <script type="module">
       // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyDp84hJoV8XMHBFuVOu_EkOVGI_XJEXzVk",
    authDomain: "gift-shaka-official.firebaseapp.com",
    projectId: "gift-shaka-official",
    storageBucket: "gift-shaka-official.firebasestorage.app",
    messagingSenderId: "50535634548",
    appId: "1:50535634548:web:4a9c18d15a4cc28cc0e321",
    measurementId: "G-7QVDE7RQ9F"
  };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        setPersistence(auth, browserLocalPersistence)
        .then(() => {
            console.log("Persistence set to local");
        })
        
        // The Bouncer
        onAuthStateChanged(auth, (user) => {
            const adminEmail = "alvinokonofua@gmail.com";
            const adminEmail2 = "itzrobert25@gmail.com";
            
            if (user && (user.email === adminEmail || user.email === adminEmail2)) {
                console.log("WELCOME BOSS");
                document.body.style.display = "block"; // Reveal the page
            } else {
                console.log("Access Denied");
                window.location.href = "login.html";
            }
        });
        
        // Global Logout Function
        window.logoutuser = function() {
            signOut(auth).then(() => {
                window.location.href = 'login.html';
            });
        };
    </script>
</head>
<body class="admin">
    <div class="floating-leaves">
        <div class="leaf">üçÉ</div>
        <div class="leaf">üåø</div>
        <div class="leaf">üçÉ</div>
        <div class="leaf">üå±</div>
        <div class="leaf">üçÉ</div>
    </div>
    <header>
        <h1>Gift Shaka Global Concepts Garri Factory- Admin Dashboard</h1>
        <div class="hamburger" onclick="toggleMenu()">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <nav>
            <div class="nav-links" id="nav-links">
                <a href="index.html">Home</a>
                <a href="menu.html">Product</a>
                <a href="process.html">Process</a>
                <a href="location.html">Location</a>
                <a href="contact.html">Contact</a>
                <a href="activities.html">Daily Activities</a>
                <a href="login.html">Admin Login</a>
                <a href="#" onclick="logoutuser(); return false;" class="logout-link">Logout</a>
            </div>
        </nav>
    </header>
    <br>
            <div style="flex: 1;">
                <div class="admin-header">
                    <br>
                    <h2>üå± Administrator Dashboard</h2>
                    <p>Manage your eco-friendly produce market</p>
                </div>
                <section class="admin-stats">
                    <div class="stat-card">
                        <h3>Today's Sales</h3>
                        <p id="today-sales">$0.00</p>
                    </div>
                    <div class="stat-card">
                        <h3>Products in Stock</h3>
                        <p id="products-stock">0 Items</p>
                    </div>
                    <div class="stat-card">
                        <h3>Customer Orders</h3>
                        <p id="customer-orders">0 Pending</p>
                    </div>
                    <div class="stat-card">
                        <h3>Sustainability Score</h3>
                        <p>95%</p>
                    </div>
                </section>
                <section class="admin-actions">
                    <div class="action-card">
                        <h3>üìä View Reports</h3>
                        <p>Check sales and inventory reports</p>
                        <a href="view_reports.html"><button>View Reports</button></a>
                    </div>
                    <div class="action-card">
                        <h3> Customer Support</h3>
                        <p>Handle customer inquiries HERE</p>
                        <a href="contact.html"><button>Open Support</button></a>
                    </div>
                    <div class="action-card">
                        <h3>üåç Sustainability</h3>
                        <p>Monitor eco-friendly practices</p>
                        <a href="sustainability.html"><button>View Metrics</button></a>
                    </div>
                    <div class="action-card">
                        <h3>üõí View Orders</h3>
                        <p>Check customer purchases and orders</p>
                        <button onclick="showOrders()">View Orders</button>
                    </div>
                    <div class="action-card">
                        <h3>üìÑ Production Logs</h3>
                        <p>Access detailed production logs</p>
                        <a href="sheet.html"><button>View Logs</button></a>
                    </div>
                    <div class="action-card">
                        <h3>üìÖ Daily Activities</h3>
                        <p>Manage daily production activities</p>
                        <button onclick="showActivities()">View Activities</button>
                </section>
                <section id="orders-section" style="display: none;">
                    <h3>Customer Orders</h3>
                    <div id="orders-list"></div>
                </section>
                <section id="activities-section" style="display: none;">
                    <h3>Daily Activities</h3>
                    <div id="activities-list-admin"></div>
                </section>
            </div>
        </main>
   <footer style="text-align:center; margin-top: 40px; padding: 20px; opacity: 0.7;">
        <p style="font-size: 12px; color: #fff;">
        &copy; 2026 Gift Shaka Global Garri Concepts. <br>
        <span style="letter-spacing: 1px;">&copy;ENGINEERED </span>
        <a href="https://alvinkill.github.io/portfolio/" target="_blank"
            style="color:#27a860; text-decoration:none; font-weight:bold"> AND PROGRAMMED BY ROSEAN-X.</a></p>
    </footer>
    <script>
       
       // Auto logout after inactivity
       let logoutTimer;
       function resetLogoutTimer() {
           clearTimeout(logoutTimer);
           logoutTimer = setTimeout(() => {
               alert("You have been logged out due to inactivity.");
               window.location.href = "login.html";
           }, 15 * 60 * 1000); // 15 minutes
       }
       
      
        // Calculate stats
        function updateStats() {
            const today = new Date().toDateString();
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const products = JSON.parse(localStorage.getItem('products') || '[]');
            
            let todaySales = 0;
            let pendingOrders = 0;
            
            orders.forEach(order => {
                if (new Date(order.date).toDateString() === today) {
                    todaySales += order.total;
                }
                if (order.status === 'pending') {
                    pendingOrders++;
                }
            });
            
            document.getElementById('today-sales').textContent = `$${todaySales.toFixed(2)}`;
            document.getElementById('products-stock').textContent = `${products.length} Items`;
            document.getElementById('customer-orders').textContent = `${pendingOrders} Pending`;
        }
        
       
        
        function showOrders() {
            const ordersSection = document.getElementById('orders-section');
            ordersSection.style.display = ordersSection.style.display === 'none' ? 'block' : 'none';
            displayOrders();
        }
        
        function displayOrders() {
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const ordersList = document.getElementById('orders-list');
            ordersList.innerHTML = '';
            if (orders.length === 0) {
                ordersList.innerHTML = '<p>No orders yet.</p>';
                return;
            }
            orders.forEach(order => {
                const orderDiv = document.createElement('div');
                orderDiv.style.border = '1px solid #ddd';
                orderDiv.style.padding = '10px';
                orderDiv.style.margin = '10px 0';
                orderDiv.innerHTML = `
                    <strong>Order ID: ${order.id}</strong><br>
                    Date: ${new Date(order.date).toLocaleString()}<br>
                    Total: $${order.total.toFixed(2)}<br>
                    Status: ${order.status}<br>
                    Items: ${order.items.map(item => `${item.name} x${item.quantity}`).join(', ')}
                `;
                ordersList.appendChild(orderDiv);
            });
        }
        
        function showActivities() {
            const activitiesSection = document.getElementById('activities-section');
            activitiesSection.style.display = activitiesSection.style.display === 'none' ? 'block' : 'none';
            displayActivitiesAdmin();
        }
        
        function displayActivitiesAdmin() {
            const activities = JSON.parse(localStorage.getItem('activities') || '[]');
            const activitiesList = document.getElementById('activities-list-admin');
            activitiesList.innerHTML = '';
            if (activities.length === 0) {
                activitiesList.innerHTML = '<p>No activities recorded.</p>';
                return;
            }
            activities.forEach((activity, index) => {
                const activityDiv = document.createElement('div');
                activityDiv.style.border = '1px solid #ddd';
                activityDiv.style.padding = '10px';
                activityDiv.style.margin = '10px 0';
                activityDiv.innerHTML = `
                    <strong>${activity.date} - ${activity.title}</strong><br>
                    ${activity.description}
                    <br><button onclick="editActivityAdmin(${index})">Edit</button> <button onclick="deleteActivityAdmin(${index})" style="background-color: #e74c3c; color: white;">Delete</button>
                `;
                activitiesList.appendChild(activityDiv);
            });
        }
        
        function editActivityAdmin(index) {
            // Similar to activities.html
            const activities = JSON.parse(localStorage.getItem('activities')) || [];
            const activity = activities[index];
            const newTitle = prompt('Edit title:', activity.title);
            const newDesc = prompt('Edit description:', activity.description);
            if (newTitle && newDesc) {
                activities[index].title = newTitle;
                activities[index].description = newDesc;
                localStorage.setItem('activities', JSON.stringify(activities));
                displayActivitiesAdmin();
            }
        }
        
        function deleteActivityAdmin(index) {
            if (confirm('Are you sure you want to delete this activity?')) {
                const activities = JSON.parse(localStorage.getItem('activities')) || [];
                activities.splice(index, 1);
                localStorage.setItem('activities', JSON.stringify(activities));
                displayActivitiesAdmin();
            }
        }
        
        // Initialize stats on page load
        updateStats();
    </script>
    
    <!-- Regular script for hamburger menu (needs to be global) -->
    <script>
        function toggleMenu() {
            const navLinks = document.getElementById('nav-links');
            navLinks.classList.toggle('active');
            const hamburger = document.querySelector('.hamburger');
            if (hamburger) hamburger.classList.toggle('active');
        }
    </script>
    
</body>

</html>


